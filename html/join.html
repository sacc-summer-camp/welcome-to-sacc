<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Join us</title>
    <link rel="stylesheet" type="text/css" href="../css/join.css">
    <link rel="stylesheet" href="../css/fullpage.css">
</head>
<body class="main a-fadein">
  <canvas id="canvas"></canvas>
  <div id="fullpage">
      <div class="section first_page page">
          <div class="first_page_container">
              <div class="a3 colorful">JOIN US</div>
              <div class="a4"><span class="scribe">è®¡è½¯ç½‘å®‰é™¢ç§‘å</span></div>
              <div class="a5">å¡«äº†è¿™ä¸ªè¡¨æ ¼ï¼Œä½ å°±æ˜¯æˆ‘ä»¬çš„äººäº† <span>ğŸ‰ğŸ‰ğŸ‰</span></div>
          </div>
      </div>
      <div class="section second_page page">
          <div class="input_field">
              <div class="b1">
                  <div class="c1">å§“åï¼š</div>
                  <div class="c2"><input onchange="review()" type="text" id="name" placeholder="ä¾‹ï¼‰ç¨‹å¤§å£®" required></div>
              </div>
              <div class="b1">
                  <div class="c1">ä¸“ä¸šï¼š</div>
                  <div class="c2"><input onchange="review()" type="text" id="major" placeholder="ä¾‹ï¼‰è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯" required></div>
              </div>
              <div class="b1">
                  <div class="c1">å­¦å·ï¼š</div>
                  <div class="c2"><input onchange="review()" type="text" id="num" placeholder="ä¾‹ï¼‰B19010101" required></div>
              </div>
              <div class="b1">
                  <div class="c1">é‚®ç®±ï¼š</div>
                  <div class="c2"><input onchange="review()" type="email" id="email" placeholder="ä¾‹ï¼‰3159742702@qq.com"></div>
              </div>
              <div class="b1">
                  <div class="c1">æ‰‹æœºï¼š</div>
                  <div class="c2"><input onchange="review()" type="tel" id="tel" placeholder="ä¾‹ï¼‰19812345678" required></div>
              </div>
              <div class="b1">
                  <div class="c1">éƒ¨é—¨ï¼š</div>
                  <div class="c2">
                      <select id="want">
                          <option value="åŠå…¬å®¤">åŠå…¬å®¤</option>
                          <option value="æ–°åª’ä½“">æ–°åª’ä½“</option>
                          <option value="æŠ€æœ¯éƒ¨">æŠ€æœ¯éƒ¨</option>
                      </select>
                  </div>
              </div>
              <div class="b7">
                  <div class="c3" onclick="submit()"><button class="block">&emsp;åŠ å…¥æˆ‘ä»¬ï¼</button></div>
              </div>
          </div>
      </div>
  </div>
  <div id="beside">
      Â©2019 Science Association of Computer College All Rights Reserved.
  </div>
  <script src="../js/gravity_canvas.js"></script>
  <script src="../js/fullpage.js"></script>
  <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
  <script type="text/javascript">
    var flag = true;
    var reg0  = /^[A-Za-zd0-9]+([-_.][A-Za-zd]+)*@([A-Za-zd]+[-.])+[A-Za-zd]{2,5}$/;
    var reg1 = new RegExp("[A-Za-z0-9]+$")
    var person = {};
    function review(){
      flag = true
      person = {
        name:document.querySelector("#name").value,
        major:document.querySelector("#major").value,
        num:document.querySelector("#num").value,
        email:document.querySelector("#email").value,
        want:document.querySelector("#want").value,
        tel:document.querySelector("#tel").value
      }
      if (person.name==''){
        flag = false
        document.querySelector("#name").style.borderColor = "red"
      }
      else{
        flag = true
        document.querySelector("#name").style.borderColor = "#cccccc"
      }
      if (person.major==''){
        flag = false
        document.querySelector("#major").style.borderColor = "red"
      }
      else{
        flag = true
        document.querySelector("#major").style.borderColor = "#cccccc"
      }
      if (person.num==''){
        flag = false
        document.querySelector("#num").style.borderColor = "red"
      }
      else{
        flag = true
        document.querySelector("#num").style.borderColor = "#cccccc"
      }
      if (person.tel==''){
        flag = false
        document.querySelector("#tel").style.borderColor = "red"
      }
      else{
        flag = true
        document.querySelector("#tel").style.borderColor = "#cccccc"
      }
      if (person.email==''){
        flag = false
        document.querySelector("#email").style.borderColor = "red"
      }
      else{
        flag = true
        document.querySelector("#email").style.borderColor = "#cccccc"
      }
      console.log(flag)
    }
    function submit() {
      review();
      if(flag){
        $.ajax({
          url:'http://192.168.43.80:8080/api/register',
          type:'post',
          headers:{'Content-Type':'application/json'},
          data:JSON.stringify({
            "name":person.name,
            "number":person.num,
            "phone":person.tel,
            "major":person.major,
            "email":person.email,
            "department":person.want
          }),
          dataType:'json',
          success:function (res) {
            alert(res.data)
          },
          error:function (err) {
            alert(err.responseText)
          }
        })
      }
    }
    var myFullpage = new fullpage('#fullpage', {
      verticalCentered: false
    });
  </script>
</body>
</html>


